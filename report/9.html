<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="icon" href="favicon.ico">
        <title>你的心理衰老了吗？</title>

              <link rel="stylesheet" href="/static/css/bootstrap.min.css">
              <script src="/static/js/jquery-2.1.4.min.js"></script>
              <script src="/static/js/bootstrap.min.js"></script>
              <script src="/static/js/layer/layer.js"></script>
              <script src="/static/js/template-web.js"></script>


    </head>
<body>
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=65913753" charset="UTF-8"></script>

<script type="text/html" id="script_title">
    <p style="padding-top: 35px;font-size: 34px;"><%=title%></p>
</script>

<script type="text/html" id="script_1">
   <div class="panel panel-default">
   	<div class="panel-heading">
   		<h3 class="panel-title">
   			测试结果:
   		</h3>
   	</div>
   	<div class="panel-body">
   		<%=name%>
   	</div>
   </div>
</script>


<div style="margin-top: -20px;background-color: #604d94;color: #FFF;">
    <div class="container"  id="container_title">
        <p style="padding-top: 35px;font-size: 34px;">title</p>
    </div>
</div>

<div class="container" id="container_1">

</div>

<div class="container">
	<div class="alert alert-success" role="alert">
	  <h4 class="alert-heading">心理视点</h4>
	  <p class="mb-0">依照上面的自测结果，结合下面的心理使康10大标准，便可大致了解自己的心理年龄。
					有充分的安全感，有自知之明，对自己的能力有恰如其分的评价，生活目标切合实际，能够现实地对待和处理身边所发生的间题，能与周围环境保持良好的接做，并能始终兴趣盎然;能保持自己人格的完整与和谐，具有经验中学习的能力情绪平和，自控能力强个性发挥良好、适度:能在个人身体允许的范围内适度发挥自己的个性;能在社会规范之内对个人的基本求恰如其分地感到满足。</p>
	</div>
</div>

<script>
    function getUrlParam(name) {
        //构造一个含有目标参数的正则表达式对象
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        //匹配目标参数
        var r = window.location.search.substr(1).match(reg);
        //返回参数
        if (r != null) {
            return unescape(r[2]);
        } else {
            return null;
        }
    }
</script>

<script>
    var score = 0;
    var list = [];
		window.onload = function (){
		    $.get('http://apoc.aikutest.com',{
		        'm':'wj',
		        'c':'wj',
		        'a':'answer',
		        'id':getUrlParam('id'),
		    'wid':getUrlParam('wid')
		},function (data) {
		        if(data.io){
		            answer = JSON.parse(data.data)
		            init();
		        }else{
		            console.debug(data.data);
		        }
		    },'json');
		
		};
    function init() {
        $.get('/static/wj/topic/'+ getUrlParam('id')+'.json',{},function (data) {
            if(data.io){
                var html = template('script_title', data.data);
                $("#container_title").html(html);

                var name = data.data['report']['abbr'];

                for(var i2 = 0; i2 < data.data['report']['topic'].length; i2++){
                    eval(name +'+='+ Number(eval('answer.q'+Number(data.data['report']['topic'][i2]))));
                }

                if(score <= 4){
                    var html = template('script_1', {"name":data.data['report']['A']});
                }else if(score >= 5 && score <= 8){
                    var html = template('script_1', {"name":data.data['report']['B']});
                }else if(score >=9 && score <= 12){
                    var html = template('script_1', {"name":data.data['report']['C']});
                }else if(score >=13 && score <= 16){
					var html = template('script_1', {"name":data.data['report']['D']});
				}else{
					var html = template('script_1', {"name":data.data['report']['E']});
				}

                $("#container_1").append(html);

            }else{
                console.debug(data.data);
            }
        },'json');

        console.log('ok');
    }


</script>